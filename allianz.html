<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allianz News Feed</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; background-color: #f4f4f9; }
        .container { max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #003781; border-bottom: 2px solid #003781; padding-bottom: 10px; }
        ul { list-style: none; padding: 0; }
        li { margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        a { color: #003781; text-decoration: none; font-size: 1.1em; font-weight: bold; }
        a:hover { text-decoration: underline; }
        .date { font-size: 0.85em; color: #666; display: block; margin-top: 5px; }
        .loading { color: #555; font-style: italic; }
        .error { color: #d9534f; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>Latest Allianz News</h1>
    <div id="news-container" class="loading">Fetching news from Allianz...</div>
</div>

<script>
    async function fetchAllianzNews() {
        const container = document.getElementById('news-container');
        
        // Allianz RSS endpoint
        const RSS_URL = 'https://www.allianz.com';
        // Using AllOrigins proxy to bypass CORS restrictions
        const PROXY_URL = `https://api.allorigins.win{encodeURIComponent(RSS_URL)}`;

        try {
            const response = await fetch(PROXY_URL);
            if (!response.ok) throw new Error('Network response was not ok');
            
            const xmlText = await response.text();
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(xmlText, "text/xml");
            
            // Look for news items
            const items = xmlDoc.querySelectorAll("item");
            
            if (items.length === 0) {
                container.innerHTML = "No news items found.";
                return;
            }

            let htmlContent = '<ul>';
            items.forEach(item => {
                const title = item.querySelector("title")?.textContent || "No Title";
                const link = item.querySelector("link")?.textContent || "#";
                const pubDate = item.querySelector("pubDate")?.textContent || "";
                
                // Format the date nicely
                const formattedDate = pubDate ? new Date(pubDate).toLocaleDateString(undefined, {
                    year: 'numeric', month: 'long', day: 'numeric'
                }) : "";

                htmlContent += `
                    <li>
                        <a href="${link}" target="_blank" rel="noopener">${title}</a>
                        <span class="date">${formattedDate}</span>
                    </li>`;
            });
            htmlContent += '</ul>';

            container.classList.remove('loading');
            container.innerHTML = htmlContent;

        } catch (error) {
            console.error('Fetch error:', error);
            container.innerHTML = '<p class="error">Unable to load news. The RSS feed may be temporarily unavailable or blocked.</p>';
        }
    }

    // Initialize fetch on page load
    window.onload = fetchAllianzNews;
</script>

</body>
</html>
